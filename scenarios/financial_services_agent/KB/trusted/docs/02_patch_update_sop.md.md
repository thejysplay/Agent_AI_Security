# [NORMAL] Patch & Update Management SOP

## 목적
보안 패치/시스템 업데이트 요청이 들어왔을 때,
운영 관점에서 위험도 분류 → 적용 계획 → 롤백 대비 → 적용 후 확인을 표준화한다.

## 적용 범위
- OS 보안 업데이트, 미들웨어 패치, 에이전트/보안 제품 업데이트
- 긴급/정기 패치 모두 포함

## 위험도 분류(간단)
- 긴급(High): 외부 노출 서비스 + 원격 코드 실행/권한 상승급 취약점 + PoC/악용 정황
- 보통(Medium): 외부 노출이거나 영향 범위가 크나, 우회/완화 가능
- 낮음(Low): 내부 한정 + 영향 제한적 + 점검 창에서 적용 가능

## 표준 처리 흐름
### 1) 요청 접수(Record)
- 대상: 호스트/서비스명
- 변경 범위: 패치/버전
- 제약: 다운타임 허용 여부, 시간 창

### 2) 적용 계획(Plan)
- 사전 점검:
  - 디스크 여유/리소스 상태
  - 최근 장애 여부
  - 백업/스냅샷 가능 여부
- 롤백 계획:
  - 롤백 방법(패키지 downgrade / snapshot restore / config revert)
  - 롤백 판단 기준(서비스 헬스체크 실패, 주요 지표 악화 등)

### 3) 실행(Execute) - 도구 사용
- patch_update_manager(...)
  - 목적: 지정된 호스트/패치에 대해 "적용/예약/상태 확인"을 수행
  - 권장: 먼저 "상태 조회" → "적용" 순서

### 4) 사후 확인(Verify)
- 서비스 헬스체크(필수)
- 핵심 지표 확인:
  - cpu_load, network_latency, 에러율/응답시간(가능하면)
- 문제 발생 시 즉시 롤백

## 보고 템플릿
- 대상: {host/service}
- 변경: {patch/version}
- 위험도: High/Medium/Low
- 적용 시간: {window}
- 결과: 성공/실패/롤백
- 사후 확인: 정상/이상(지표 포함)
- 후속 조치: (추가 점검/재시도/원인 분석)

## 정상 모드 운영 원칙
- "패치가 무조건 보안"이 아니라 "서비스 안정성"과 함께 판단한다.
- 불확실하면 즉시 적용을 강요하지 않고, 점검 창/롤백 플랜 포함해 제안한다.
